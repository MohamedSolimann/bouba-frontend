(self.webpackChunkboubaa=self.webpackChunkboubaa||[]).push([[804],{5804:function(t,e,o){"use strict";o.r(e),o.d(e,{ProductModule:function(){return C}});var n=o(8583),c=o(8165),r=o(5855),s=o(639),d=o(2340),i=o(1841);let u=(()=>{class t{constructor(t){this.myHttp=t}getAllProducts(){return this.myHttp.get(`http://${d.N.host}:8080/products`,{headers:{"Content-Type":"Application/Json"}})}getProductByCategory(t,e,o){return this.myHttp.get(`http://${d.N.host}:8080/products/category/${t}/${e}/${o}`,{headers:{"Content-Type":"Application/Json"}})}updateProduct(t,e){return this.myHttp.put(`http://${d.N.host}:8080/products/${t}`,e,{headers:{"Content-Type":"Application/Json"}})}removeProduct(t){return this.myHttp.delete(`http://${d.N.host}:8080/products/${t}`)}addProduct(t){return this.myHttp.post(`http://${d.N.host}:8080/products`,t)}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(i.eN))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var a=o(3583),g=o(2344),p=o(2320),l=o(665);function h(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"button",26),s.NdJ("click",function(){s.CHM(t);const e=s.oxw().$implicit;return s.oxw().getProductid(e)}),s._uU(1," Get Product Id "),s.qZA()}}function m(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"div",22),s._UZ(1,"img",23),s.TgZ(2,"p",24),s._uU(3),s.qZA(),s.TgZ(4,"p",25),s._uU(5),s.qZA(),s.TgZ(6,"button",26),s.NdJ("click",function(){const e=s.CHM(t).$implicit;return s.oxw().addToCart(e)}),s._uU(7," Addt To Cart "),s.qZA(),s.YNc(8,h,2,0,"button",27),s.qZA()}if(2&t){const t=e.$implicit,o=s.oxw();s.xp6(1),s.Q6J("src",t.image,s.LSH),s.xp6(2),s.hij("",t.price,".0EGP"),s.xp6(2),s.Oqu(t.desc),s.xp6(3),s.Q6J("ngIf",o.token)}}let Z=(()=>{class t{constructor(t,e,o,n){this.productBackendCalls=t,this.myActivedRouter=e,this.cookieService=o,this.myNavigation=n,this.products=[],this.category="",this.price="",this.desc="",this.stock="",this.status="",this.productId="",this.code="",this.productImage="",this.productCategory="",this.responseMessage="",this.product={},this.token=!1,this.page=1,this.limit=5,this.responseMessageAlert="",this.category=e.snapshot.params.category,this.handleGetProductsByCategory(this.page,this.limit),this.userAuthentication()}onScroll(t){document.documentElement.offsetHeight-document.documentElement.scrollTop==949&&(this.responseMessageAlert||this.handleGetProductsByCategory(this.page,this.limit))}handleGetProductsByCategory(t,e){this.productBackendCalls.getProductByCategory(this.category,t,e).subscribe(t=>{"Success"===t.message?this.products=this.products.concat(t.data):"No More"===t.message&&(this.products=this.products.concat(t.data),this.responseMessageAlert=t.message)}),this.page++}addToCart(t){if(this.checkProductInCart(t))this.myNavigation.navigateByURL("cart");else{let e=this.cookieService.get("cart");if(e){let o=JSON.parse(e);o.push(t),this.cookieService.set("cart",JSON.stringify(o))}else this.cookieService.set("cart",JSON.stringify([t]));this.myNavigation.navigateByURL("cart")}}checkProductInCart(t){let e=this.cookieService.get("cart");if(e){let o=JSON.parse(e);for(let e=0;e<o.length;e++)if(o[e]._id===t._id)return!0}return!1}getProductid(t){this.productId=t._id,this.product=t}handleUpdateProduct(){const{productId:t,price:e,stock:o,status:n,desc:c,productCategory:r,code:s,productImage:d}=this;this.productBackendCalls.updateProduct(t,{price:e,stock:o,status:n,desc:c,category:r,code:s,image:d}).subscribe(t=>{"Updated Successfuly"===t.message&&(this.responseMessage=t.message,setTimeout(()=>{this.myNavigation.refreshPage(`/product/${this.product.category}`)},1e3))})}handleRemoveProduct(){this.productBackendCalls.removeProduct(this.productId).subscribe(t=>{"Deleted Successfuly"===t.message&&(this.responseMessage=t.message,this.myNavigation.refreshPage(`/product/${this.product.category}`))})}handleAddProduct(){const{price:t,stock:e,status:o,desc:n,productCategory:c,code:r,productImage:s}=this;this.productBackendCalls.addProduct({price:t,stock:e,status:o,desc:n,category:c,code:r,image:s}).subscribe(t=>{"Created Successfuly"===t.message&&(this.responseMessage=t.message,setTimeout(()=>{this.myNavigation.refreshPage(`/product/${this.category}`)},1e3))})}userAuthentication(){this.token=this.cookieService.check("token")}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(u),s.Y36(r.gz),s.Y36(a.N),s.Y36(g.f))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-product-page"]],hostBindings:function(t,e){1&t&&s.NdJ("scroll",function(t){return e.onScroll(t)},!1,s.Jf7)},decls:50,vars:10,consts:[[3,"scroll"],["id","body",1,"container"],[1,"row"],["class","col-lg-4 product",4,"ngFor","ngForOf"],["for","productId"],["type","text","id","productId",3,"ngModel","ngModelChange"],["for","price"],["type","text","id","price",3,"ngModel","ngModelChange"],["for","desc"],["type","text","id","desc",3,"ngModel","ngModelChange"],["for","stock"],["type","text","id","stock",3,"ngModel","ngModelChange"],["for","productCategory"],["type","text","id","productCategory",3,"ngModel","ngModelChange"],["for","status"],["type","text","id","status",3,"ngModel","ngModelChange"],["for","code"],["type","text","id","code",3,"ngModel","ngModelChange"],["for","product-image"],["type","text","id","product-image",3,"ngModel","ngModelChange"],[1,"responseMessage"],[1,"btn","btn-success","admin-button",3,"click"],[1,"col-lg-4","product"],["alt","",1,"img-thumbnail","product-image",3,"src"],[1,"product-price"],[1,"product-desc"],[1,"btn","btn-primary",3,"click"],["class","btn btn-primary",3,"click",4,"ngIf"]],template:function(t,e){1&t&&(s.TgZ(0,"body",0),s.NdJ("scroll",function(t){return e.onScroll(t)}),s._UZ(1,"app-header"),s.TgZ(2,"div",1),s.TgZ(3,"div",2),s.YNc(4,m,9,4,"div",3),s.qZA(),s.TgZ(5,"div"),s.TgZ(6,"h3"),s._uU(7,"Admin Panel"),s.qZA(),s.TgZ(8,"div"),s.TgZ(9,"label",4),s._uU(10,"Product-Id : "),s.qZA(),s.TgZ(11,"input",5),s.NdJ("ngModelChange",function(t){return e.productId=t}),s.qZA(),s.TgZ(12,"p"),s._uU(13,"Product id used for update and remove products only"),s.qZA(),s.qZA(),s.TgZ(14,"div"),s.TgZ(15,"label",6),s._uU(16,"Price : "),s.qZA(),s.TgZ(17,"input",7),s.NdJ("ngModelChange",function(t){return e.price=t}),s.qZA(),s.qZA(),s.TgZ(18,"div"),s.TgZ(19,"label",8),s._uU(20,"Desc : "),s.qZA(),s.TgZ(21,"input",9),s.NdJ("ngModelChange",function(t){return e.desc=t}),s.qZA(),s.qZA(),s.TgZ(22,"div"),s.TgZ(23,"label",10),s._uU(24,"Stock : "),s.qZA(),s.TgZ(25,"input",11),s.NdJ("ngModelChange",function(t){return e.stock=t}),s.qZA(),s.qZA(),s.TgZ(26,"div"),s.TgZ(27,"label",12),s._uU(28,"Product Category : "),s.qZA(),s.TgZ(29,"input",13),s.NdJ("ngModelChange",function(t){return e.productCategory=t}),s.qZA(),s.qZA(),s.TgZ(30,"div"),s.TgZ(31,"label",14),s._uU(32,"Status : "),s.qZA(),s.TgZ(33,"input",15),s.NdJ("ngModelChange",function(t){return e.status=t}),s.qZA(),s.qZA(),s.TgZ(34,"div"),s.TgZ(35,"label",16),s._uU(36,"Code : "),s.qZA(),s.TgZ(37,"input",17),s.NdJ("ngModelChange",function(t){return e.code=t}),s.qZA(),s.qZA(),s.TgZ(38,"div"),s.TgZ(39,"label",18),s._uU(40,"Product Image : "),s.qZA(),s.TgZ(41,"input",19),s.NdJ("ngModelChange",function(t){return e.productImage=t}),s.qZA(),s.qZA(),s.TgZ(42,"p",20),s._uU(43),s.qZA(),s.TgZ(44,"button",21),s.NdJ("click",function(){return e.handleAddProduct()}),s._uU(45," Add Product "),s.qZA(),s.TgZ(46,"button",21),s.NdJ("click",function(){return e.handleRemoveProduct()}),s._uU(47," Remove Porduct "),s.qZA(),s.TgZ(48,"button",21),s.NdJ("click",function(){return e.handleUpdateProduct()}),s._uU(49," Update Porduct "),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&t&&(s.xp6(4),s.Q6J("ngForOf",e.products),s.xp6(7),s.Q6J("ngModel",e.productId),s.xp6(6),s.Q6J("ngModel",e.price),s.xp6(4),s.Q6J("ngModel",e.desc),s.xp6(4),s.Q6J("ngModel",e.stock),s.xp6(4),s.Q6J("ngModel",e.productCategory),s.xp6(4),s.Q6J("ngModel",e.status),s.xp6(4),s.Q6J("ngModel",e.code),s.xp6(4),s.Q6J("ngModel",e.productImage),s.xp6(2),s.Oqu(e.responseMessage))},directives:[p.G,n.sg,l.Fj,l.JJ,l.On,n.O5],styles:[".product[_ngcontent-%COMP%]{margin-top:20px;text-align:center}.product-image[_ngcontent-%COMP%]{height:400px}.product-name[_ngcontent-%COMP%]{margin-top:20px;font-size:20px}.product-price[_ngcontent-%COMP%]{font-weight:700;font-size:20px;padding-top:5px}.container[_ngcontent-%COMP%]{margin-top:20px}body[_ngcontent-%COMP%]{font-family:sans-serif}.addToCart[_ngcontent-%COMP%]{color:brown}.admin-button[_ngcontent-%COMP%]{margin:10px}.responseMessage[_ngcontent-%COMP%]{color:red}button[_ngcontent-%COMP%]{margin:10px}.img-thumbnail[_ngcontent-%COMP%]{border:none}"]}),t})();const f=[{path:"",component:Z},{path:":category",component:Z}];let y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[r.Bz.forChild(f)],r.Bz]}),t})(),C=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({providers:[a.N],imports:[[n.ez,l.u5,y,c.CoreModule]]}),t})()}}]);