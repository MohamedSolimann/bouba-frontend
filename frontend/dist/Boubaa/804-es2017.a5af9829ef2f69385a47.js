(self.webpackChunkboubaa=self.webpackChunkboubaa||[]).push([[804],{5804:function(t,e,o){"use strict";o.r(e),o.d(e,{ProductModule:function(){return y}});var n=o(8583),c=o(8165),r=o(5855),s=o(639),d=o(1841);let i=(()=>{class t{constructor(t){this.myHttp=t}getAllProducts(){return this.myHttp.get("http://18.157.177.129:8080/products",{headers:{"Content-Type":"Application/Json"}})}getProductByCategory(t,e,o){return this.myHttp.get(`http://18.157.177.129:8080/products/category/${t}/${e}/${o}`,{headers:{"Content-Type":"Application/Json"}})}updateProduct(t,e){return this.myHttp.put(`http://18.157.177.129:8080/products/${t}`,e,{headers:{"Content-Type":"Application/Json"}})}removeProduct(t){return this.myHttp.delete(`http://18.157.177.129:8080/products/${t}`)}addProduct(t){return this.myHttp.post("http://18.157.177.129:8080/products",t)}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(d.eN))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var u=o(3583),a=o(2344),g=o(2320),p=o(665);function l(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"button",9),s.NdJ("click",function(){s.CHM(t);const e=s.oxw().$implicit;return s.oxw().getProductid(e)}),s._uU(1," Get Product Id "),s.qZA()}}function h(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"div",5),s._UZ(1,"img",6),s.TgZ(2,"p",7),s._uU(3),s.qZA(),s.TgZ(4,"p",8),s._uU(5),s.qZA(),s.TgZ(6,"button",9),s.NdJ("click",function(){const e=s.CHM(t).$implicit;return s.oxw().addToCart(e)}),s._uU(7," Addt To Cart "),s.qZA(),s.YNc(8,l,2,0,"button",10),s.qZA()}if(2&t){const t=e.$implicit,o=s.oxw();s.xp6(1),s.Q6J("src",t.image,s.LSH),s.xp6(2),s.hij("",t.price,".0EGP"),s.xp6(2),s.Oqu(t.desc),s.xp6(3),s.Q6J("ngIf",o.token)}}function m(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"div"),s.TgZ(1,"h3"),s._uU(2,"Admin Panel"),s.qZA(),s.TgZ(3,"div"),s.TgZ(4,"label",11),s._uU(5,"Product-Id : "),s.qZA(),s.TgZ(6,"input",12),s.NdJ("ngModelChange",function(e){return s.CHM(t),s.oxw().productId=e}),s.qZA(),s.TgZ(7,"p"),s._uU(8,"Product id used for update and remove products only"),s.qZA(),s.qZA(),s.TgZ(9,"div"),s.TgZ(10,"label",13),s._uU(11,"Price : "),s.qZA(),s.TgZ(12,"input",14),s.NdJ("ngModelChange",function(e){return s.CHM(t),s.oxw().price=e}),s.qZA(),s.qZA(),s.TgZ(13,"div"),s.TgZ(14,"label",15),s._uU(15,"Desc : "),s.qZA(),s.TgZ(16,"input",16),s.NdJ("ngModelChange",function(e){return s.CHM(t),s.oxw().desc=e}),s.qZA(),s.qZA(),s.TgZ(17,"div"),s.TgZ(18,"label",17),s._uU(19,"Stock : "),s.qZA(),s.TgZ(20,"input",18),s.NdJ("ngModelChange",function(e){return s.CHM(t),s.oxw().stock=e}),s.qZA(),s.qZA(),s.TgZ(21,"div"),s.TgZ(22,"label",19),s._uU(23,"Product Category : "),s.qZA(),s.TgZ(24,"input",20),s.NdJ("ngModelChange",function(e){return s.CHM(t),s.oxw().productCategory=e}),s.qZA(),s.qZA(),s.TgZ(25,"div"),s.TgZ(26,"label",21),s._uU(27,"Status : "),s.qZA(),s.TgZ(28,"input",22),s.NdJ("ngModelChange",function(e){return s.CHM(t),s.oxw().status=e}),s.qZA(),s.qZA(),s.TgZ(29,"div"),s.TgZ(30,"label",23),s._uU(31,"Code : "),s.qZA(),s.TgZ(32,"input",24),s.NdJ("ngModelChange",function(e){return s.CHM(t),s.oxw().code=e}),s.qZA(),s.qZA(),s.TgZ(33,"div"),s.TgZ(34,"label",25),s._uU(35,"Product Image : "),s.qZA(),s.TgZ(36,"input",26),s.NdJ("ngModelChange",function(e){return s.CHM(t),s.oxw().productImage=e}),s.qZA(),s.qZA(),s.TgZ(37,"p",27),s._uU(38),s.qZA(),s.TgZ(39,"button",28),s.NdJ("click",function(){return s.CHM(t),s.oxw().handleAddProduct()}),s._uU(40," Add Product "),s.qZA(),s.TgZ(41,"button",28),s.NdJ("click",function(){return s.CHM(t),s.oxw().handleRemoveProduct()}),s._uU(42," Remove Porduct "),s.qZA(),s.TgZ(43,"button",28),s.NdJ("click",function(){return s.CHM(t),s.oxw().handleUpdateProduct()}),s._uU(44," Update Porduct "),s.qZA(),s.qZA()}if(2&t){const t=s.oxw();s.xp6(6),s.Q6J("ngModel",t.productId),s.xp6(6),s.Q6J("ngModel",t.price),s.xp6(4),s.Q6J("ngModel",t.desc),s.xp6(4),s.Q6J("ngModel",t.stock),s.xp6(4),s.Q6J("ngModel",t.productCategory),s.xp6(4),s.Q6J("ngModel",t.status),s.xp6(4),s.Q6J("ngModel",t.code),s.xp6(4),s.Q6J("ngModel",t.productImage),s.xp6(2),s.Oqu(t.responseMessage)}}let Z=(()=>{class t{constructor(t,e,o,n){this.productBackendCalls=t,this.myActivedRouter=e,this.cookieService=o,this.myNavigation=n,this.products=[],this.category="",this.price="",this.desc="",this.stock="",this.status="",this.productId="",this.code="",this.productImage="",this.productCategory="",this.responseMessage="",this.product={},this.token=!1,this.page=1,this.limit=5,this.responseMessageAlert="",this.category=e.snapshot.params.category,this.handleGetProductsByCategory(this.page,this.limit),this.userAuthentication()}onScroll(t){document.documentElement.offsetHeight-document.documentElement.scrollTop==949&&(this.responseMessageAlert||this.handleGetProductsByCategory(this.page,this.limit))}handleGetProductsByCategory(t,e){this.productBackendCalls.getProductByCategory(this.category,t,e).subscribe(t=>{"Success"===t.message?this.products=this.products.concat(t.data):"No More"===t.message&&(this.products=this.products.concat(t.data),this.responseMessageAlert=t.message)}),this.page++}addToCart(t){if(this.checkProductInCart(t))this.myNavigation.navigateByURL("cart");else{let e=this.cookieService.get("cart");if(e){let o=JSON.parse(e);o.push(t),this.cookieService.set("cart",JSON.stringify(o))}else this.cookieService.set("cart",JSON.stringify([t]));this.myNavigation.navigateByURL("cart")}}checkProductInCart(t){let e=this.cookieService.get("cart");if(e){let o=JSON.parse(e);for(let e=0;e<o.length;e++)if(o[e]._id===t._id)return!0}return!1}getProductid(t){this.productId=t._id,this.product=t}handleUpdateProduct(){const{productId:t,price:e,stock:o,status:n,desc:c,productCategory:r,code:s,productImage:d}=this;this.productBackendCalls.updateProduct(t,{price:e,stock:o,status:n,desc:c,category:r,code:s,image:d}).subscribe(t=>{"Updated Successfuly"===t.message&&(this.responseMessage=t.message,setTimeout(()=>{this.myNavigation.refreshPage(`/product/${this.product.category}`)},1e3))})}handleRemoveProduct(){this.productBackendCalls.removeProduct(this.productId).subscribe(t=>{"Deleted Successfuly"===t.message&&(this.responseMessage=t.message,this.myNavigation.refreshPage(`/product/${this.product.category}`))})}handleAddProduct(){const{price:t,stock:e,status:o,desc:n,productCategory:c,code:r,productImage:s}=this;this.productBackendCalls.addProduct({price:t,stock:e,status:o,desc:n,category:c,code:r,image:s}).subscribe(t=>{"Created Successfuly"===t.message&&(this.responseMessage=t.message,setTimeout(()=>{this.myNavigation.refreshPage(`/product/${this.category}`)},1e3))})}userAuthentication(){this.token=this.cookieService.check("token")}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(i),s.Y36(r.gz),s.Y36(u.N),s.Y36(a.f))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-product-page"]],hostBindings:function(t,e){1&t&&s.NdJ("scroll",function(t){return e.onScroll(t)},!1,s.Jf7)},decls:6,vars:2,consts:[[3,"scroll"],["id","body",1,"container"],[1,"row"],["class","col-xl-4 product",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"col-xl-4","product"],["alt","",1,"img-thumbnail","product-image",3,"src"],[1,"product-price"],[1,"product-desc"],[1,"btn","btn-primary",3,"click"],["class","btn btn-primary",3,"click",4,"ngIf"],["for","productId"],["type","text","id","productId",3,"ngModel","ngModelChange"],["for","price"],["type","text","id","price",3,"ngModel","ngModelChange"],["for","desc"],["type","text","id","desc",3,"ngModel","ngModelChange"],["for","stock"],["type","text","id","stock",3,"ngModel","ngModelChange"],["for","productCategory"],["type","text","id","productCategory",3,"ngModel","ngModelChange"],["for","status"],["type","text","id","status",3,"ngModel","ngModelChange"],["for","code"],["type","text","id","code",3,"ngModel","ngModelChange"],["for","product-image"],["type","text","id","product-image",3,"ngModel","ngModelChange"],[1,"responseMessage"],[1,"btn","btn-success","admin-button",3,"click"]],template:function(t,e){1&t&&(s.TgZ(0,"body",0),s.NdJ("scroll",function(t){return e.onScroll(t)}),s._UZ(1,"app-header"),s.TgZ(2,"div",1),s.TgZ(3,"div",2),s.YNc(4,h,9,4,"div",3),s.qZA(),s.YNc(5,m,45,9,"div",4),s.qZA(),s.qZA()),2&t&&(s.xp6(4),s.Q6J("ngForOf",e.products),s.xp6(1),s.Q6J("ngIf",e.token))},directives:[g.G,n.sg,n.O5,p.Fj,p.JJ,p.On],styles:[".product[_ngcontent-%COMP%]{margin-top:20px;text-align:center}.product-image[_ngcontent-%COMP%]{height:400px}.product-name[_ngcontent-%COMP%]{margin-top:20px;font-size:20px}.product-price[_ngcontent-%COMP%]{font-weight:700;font-size:20px;padding-top:5px}.container[_ngcontent-%COMP%]{margin-top:20px}body[_ngcontent-%COMP%]{font-family:sans-serif}.addToCart[_ngcontent-%COMP%]{color:brown}.admin-button[_ngcontent-%COMP%]{margin:10px}.responseMessage[_ngcontent-%COMP%]{color:red}button[_ngcontent-%COMP%]{margin:10px}.img-thumbnail[_ngcontent-%COMP%]{border:none}"]}),t})();const f=[{path:"",component:Z},{path:":category",component:Z}];let C=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[r.Bz.forChild(f)],r.Bz]}),t})(),y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({providers:[u.N],imports:[[n.ez,p.u5,C,c.CoreModule]]}),t})()}}]);